<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Pump Pressure â€” Visual Builder</title>
  <meta name="theme-color" content="#0b0f14" />

  <!-- Primary CSS (same-folder) with cache-bust -->
  <link rel="preload" as="style" href="pump-style.css?v=4">
  <link rel="stylesheet" href="pump-style.css?v=4" id="pumpCSS">

  <script>
    // If CSS fails to load (path/cdn/mime), try alternates, then inline a minimal fallback.
    (function(){
      const loadedOk = () => {
        try {
          // Heuristic: our CSS sets dark bg
          const bg = getComputedStyle(document.documentElement).getPropertyValue('--bg');
          return !!bg && bg.trim().length > 0;
        } catch(e){ return false; }
      };

      function tryLoad(href){
        return new Promise((resolve, reject)=>{
          const l = document.createElement('link');
          l.rel = 'stylesheet';
          l.href = href;
          l.onload = () => resolve(true);
          l.onerror = () => reject();
          document.head.appendChild(l);
        });
      }

      async function ensureCSS(){
        // Give the primary link a moment
        setTimeout(async () => {
          if (loadedOk()) return;

          const candidates = [
            './pump-style.css?v=4',
            '/pump/pump-style.css?v=4',         // if site serves from /pump/
            '/assets/css/pump-style.css?v=4'    // if you moved it to assets
          ];

          for (const href of candidates) {
            try { await tryLoad(href); if (loadedOk()) return; } catch(e){}
          }

          // Fallback: minimal inline CSS so UI is usable and hoses show
          const style = document.createElement('style');
          style.textContent = `
            :root{--bg:#0b0f14;--ink:#eaf2ff;--edge:rgba(255,255,255,.14);}
            html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,Segoe UI,Inter,Arial,sans-serif}
            .linebar{position:absolute;left:0;right:0;bottom:8px;display:flex;justify-content:center;gap:10px;z-index:6}
            .linebtn{background:#0b1320;border:1px solid var(--edge);color:#eaf2ff;border-radius:12px;padding:12px 16px;font-size:16px}
            /* Hose strokes so you can SEE deployment even without CSS */
            .hose5,.hose25,.hose175{fill:none;stroke-linecap:round;stroke-linejoin:round}
            .hose5{stroke:#ecd464;stroke-width:12}
            .hose25{stroke:#6ecbff;stroke-width:9}
            .hose175{stroke:#ff6b6b;stroke-width:6}
          `;
          document.head.appendChild(style);
          console.warn('pump-style.css not found via normal paths. Using inline fallback.');
        }, 0);
      }
      ensureCSS();
    })();
  </script>
</head>
